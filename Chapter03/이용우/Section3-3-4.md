# Chapter 3 운영체제(OS, Operating System)

# Section 3.3 프로세스와 스레드

## 📌 PCB(Process Control Block)

> 💡 PCB(Process Control Block)는 운영체제에서 프로세스에 대한 메타데이터를 저장한 **데이터**를 뜻합니다. 프로세스 제어 블록이라고 불리며, 프로세스가 생성되면 운영체제는 PCB를 생성하게
> 됩니다.
>

### 📒 PCB의 동작 순서

프로그램(Program)이 실행되었을 때, 프로세스(Process)가 생성되고 프로세스 주소 값에 메모리가 할당됩니다. 이 프로세스의 메타데이터들이 PCB에 저장되어 관리됩니다.  
PCB는 프로세스와 관련된 중요한 정보를 소유하고 있으므로 일반 사용자가 접근할 수 없도록 커널의 가장 앞부분에서 관리됩니다.

### 📘 PCB의 구조

- 프로세스 스케줄링 상태(Process Scheduling State)
    - "준비", "일시 중단" 등 프로세스가 CPU에 대한 소유권을 얻은 후의 상태
- 프로세스 ID(Process ID)
    - 해당 프로세스의 자식 프로세스 ID
- 프로세스 권한(Process Privilege)
    - 프로세스가 사용할 수 있는 컴퓨터 자원 또는 I/O 디바이스에 대한 권한 정보
- 프로그램 카운터(Program Counter)
    - 프로세스가 다음에 실행할 명령어의 주소 -> 명령어 주소에 대한 포인터
- CPU 레지스터(CPU Register)
    - 프로세스를 실행하기 위해 저장해야 할 레지스터에 대한 정보
- CPU 스케줄링 정보(CPU Scheduling Information)
    - 프로세스의 우선순위, 스케줄 큐에 대한 포인터 등 CPU 스케줄러에 의해 중단된 시간과 관련된 정보
- 계정 정보(Accounting Information)
    - 프로세스 실행에 사용된 CPU 사용량, 실행한 유저의 정보 등
- I/O 상태 정보(I/O Status Information)
    - 프로세스가 사용하고 있는 I/O 장치에 대한 정보

### 📗 컨텍스트 스위칭(Context Switching)

> 💡 컨텍스트 스위칭(Context Switching)은 한 프로세스에 할당된 시간이 끝나거나 인터럽트에 의해 발생학고, PCB를 교환하는 과정 그 자체를 뜻합니다.
>

실제로 컴퓨터는 여러개의 프로그램을 한 번에 실행하는 것 처럼 보이겠지만, 실제로 실행되고 있는 프로세스는 단 하나입니다. 하지만, 프로세스간의 컨텍스트 스위칭이 빠른 속도로 실행되고 있기 때문에, 여러 프로그램이
동시에 실행되는 것 처럼 느낄 수 있게 됩니다.

- 캐시미스(Cache Miss)
    - 컨텍스트 스위칭이 일어날 때 프로세스의 메모리 주소가 이전에 작업했던 내용을 가지고 있다면, 잘못된 주소 참조가 발생할 수 있기 때문에, 캐시 클리어 과정을 거치게 되어 캐시미스가 발생할 수 있게 됩니다.
- 스레드의 컨텍스트 스위칭
    - 스레드는 스택 영역을 제외한 **모든 메모리 공간을 공유**하므로 스레드 컨텍스트 스위칭은 비용이 더 적고, 시간도 프로세스보다 더욱 적게 소모됩니다.
